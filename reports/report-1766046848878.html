<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>India Sales WhatsApp Gen</title>
    <!-- å¼•å…¥ Tailwind CSS ç”¨æ–¼æ¨£å¼ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Font Awesome ç”¨æ–¼åœ–æ¨™ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f3f4f6;
            -webkit-tap-highlight-color: transparent;
        }
        .textarea-box {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
        }
        /* Mobile optimization */
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const IndiaSalesGen = () => {
            // --- ç‹€æ…‹ç®¡ç† ---
            const [customerName, setCustomerName] = useState('');
            const [customerCompany, setCustomerCompany] = useState('');
            const [referrerName, setReferrerName] = useState('');
            
            const [myName, setMyName] = useState('Michael');
            const [myCompany, setMyCompany] = useState('Foxlink');
            
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            
            const [visitLocation, setVisitLocation] = useState('Gurugram/Delhi NCR');
            
            const [stage, setStage] = useState(1);
            const [subScenario, setSubScenario] = useState('no-ref');
            const [generatedScript, setGeneratedScript] = useState('');
            const [copied, setCopied] = useState(false);

            // --- è‡ªå‹•åŒ–é‚è¼¯ ---
            useEffect(() => {
                if (stage === 1) {
                    if (referrerName.trim()) {
                        setSubScenario('ref');
                    } else if (subScenario === 'ref') {
                        setSubScenario('no-ref');
                    }
                }
            }, [referrerName, stage]);

            // --- æ ¸å¿ƒè©±è¡“åº« (æœ€çµ‚å®šç¨¿ç‰ˆ) ---
            const scripts = {
                1: { // éšæ®µä¸€ï¼šå®Œå…¨é™Œç”Ÿ
                    'no-ref': {
                        title: "å®Œå…¨é™Œç”Ÿ (ç›´æ¥åˆ‡å…¥)",
                        tone: "å°ˆæ¥­ã€è¡¨æ˜ä¾†æ„",
                        template: (data) => 
                            `Hi ${data.cName || '[Name]'}, hope you're having a busy week.\n\n` +
                            `This is ${data.mName} from ${data.mCompany}. I'm the new Regional Lead for ${data.loc}.\n\n` +
                            `I'm visiting your area ${data.date} to support key partners. I wanted to check:\n\n` +
                            `Are you the right person to discuss supply chain support for ${data.cCompany}?\n\n` +
                            `Thanks, ${data.mName}`
                    },
                    'ref': {
                        title: "æœ‰ä»‹ç´¹äºº",
                        tone: "å€ŸåŠ›ä½¿åŠ›",
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, greetings from ${data.mCompany}.\n\n` +
                            `Our mutual friend, ${data.rName || '[Referrer Name]'}, suggested I connect with you regarding manufacturing support.\n\n` +
                            `I'm visiting ${data.loc} ${data.date} and would love to stop by for a quick hello, just to put a face to the name.\n\n` +
                            `Best, ${data.mName}`
                    },
                    'verify': {
                        title: "ç¢ºèªèº«åˆ† (æ¥µç°¡)",
                        tone: "å¿«é€Ÿç¢ºèª",
                        template: (data) =>
                            `Hello, I am ${data.mName} from ${data.mCompany}.\n\n` +
                            `May I ask if this is Mr. ${data.cName || '[Name]'} from ${data.cCompany}?\n\n` +
                            `(Waiting for reply...)`
                    }
                },
                2: { // éšæ®µäºŒï¼šå»ºç«‹é—œä¿‚èˆ‡é‚€ç´„
                    'pain-point': {
                        title: "å»ºç«‹é—œä¿‚ (Relationship)",
                        tone: "é‚€ç´„å„ªå…ˆã€åƒ¹å€¼å°å‘", 
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, thanks for connecting.\n\n` +
                            `I will be in ${data.loc} ${data.date}. I'd like to request a brief 10-min meeting when I'm in your area.\n\n` +
                            `My priority is to introduce myself, so if you need any service or help in the future, I will be there.\n\n` +
                            `Also, I can share some insights from our global experience that might be useful for your current projects.\n\n` +
                            `If you're open for a quick coffee, let me know?`
                    },
                    'courtesy': {
                        title: "é †é“æ‹œè¨ª (Courtesy)",
                        tone: "ä½å£“ã€äº¤æœ‹å‹",
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, quick update on my travel schedule.\n\n` +
                            `I'll be in ${data.loc} ${data.date}.\n\n` +
                            `Since I'm in the neighborhood, can I drop by for 10 mins? Just a courtesy visit to introduce myself personally.\n\n` +
                            `Let me know if you are around!`
                    }
                },
                3: { // éšæ®µä¸‰ï¼šè¡Œç¨‹ç¢ºèª
                    'heads-up': {
                        title: "å‘ŠçŸ¥è¡Œç¨‹ (è€å‹æ„Ÿ)",
                        tone: "è¦ªåˆ‡ã€ç¢ºèª",
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, finalizing my calendar for ${data.date} in ${data.loc}.\n\n` +
                            `I have a slot open on Tuesday/Wednesday. Are you gonna be in town?\n\n` +
                            `Would be great to catch up over tea.`
                    },
                    'confirm-loc': {
                        title: "ç¢ºèªåœ°é»",
                        tone: "ç´°å¿ƒ",
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, looking forward to seeing you ${data.date}.\n\n` +
                            `Could you share your office location pin? Or should we meet at a cafe nearby?\n\n` +
                            `See you soon.`
                    },
                    'soft-ping': {
                        title: "è‡¨æ™‚è¼•æ¨ (Soft Ping)",
                        tone: "éš¨æ„",
                        template: (data) =>
                            `Hi ${data.cName || '[Name]'}, I'm finishing up a meeting nearby in ${data.loc}.\n\n` +
                            `If you're free in the next hour, I can drop by for a quick hello. If not, no worries!\n\n` +
                            `Cheers, ${data.mName}`
                    }
                }
            };

            // --- è‡ªå‹•æ›´æ–°ç”Ÿæˆçš„æ–‡å­— ---
            useEffect(() => {
                const currentScriptObj = scripts[stage][subScenario] || Object.values(scripts[stage])[0];
                const templateFn = currentScriptObj.template;

                // è™•ç†æ—¥æœŸé‚è¼¯
                let dateString = 'next week';
                if (startDate.trim()) {
                    if (endDate.trim()) {
                        dateString = `from ${startDate} to ${endDate}`;
                    } else {
                        dateString = `on ${startDate}`;
                    }
                }

                const text = templateFn({
                    cName: customerName.trim(),
                    cCompany: customerCompany.trim() || 'your company',
                    rName: referrerName.trim(),
                    mName: myName,
                    mCompany: myCompany,
                    loc: visitLocation,
                    date: dateString
                });
                setGeneratedScript(text);
                setCopied(false);
            }, [customerName, customerCompany, referrerName, myName, myCompany, startDate, endDate, visitLocation, stage, subScenario]);

            // --- è¤‡è£½åŠŸèƒ½ ---
            const copyToClipboard = () => {
                const textArea = document.createElement("textarea");
                textArea.value = generatedScript;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                } catch (err) {
                    console.error('Copy failed', err);
                }
                document.body.removeChild(textArea);
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800 p-4 md:p-8 pb-32">
                    <div className="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-100">
                        
                        {/* Header */}
                        <div className="bg-gradient-to-r from-orange-600 to-red-700 text-white p-6">
                            <div className="flex justify-between items-center">
                                <div>
                                    <h1 className="text-2xl md:text-3xl font-bold flex items-center gap-2">
                                        <i className="fab fa-whatsapp text-3xl"></i>
                                        India Sales WhatsApp
                                    </h1>
                                    <p className="text-orange-100 text-sm mt-1">
                                        å°ˆç‚ºå°åº¦å¸‚å ´è¨­è¨ˆçš„æ¥­å‹™è©±è¡“ç”Ÿæˆå™¨
                                    </p>
                                </div>
                                <div className="hidden md:block text-right text-xs opacity-80">
                                    <div>Strategy: Invite First & Global Value</div>
                                    <div>Tone: Direct & Friendly</div>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-3">
                            
                            {/* å·¦å´ï¼šè¼¸å…¥å€ */}
                            <div className="col-span-1 bg-gray-50 p-6 border-r border-gray-200 space-y-5">
                                <h2 className="text-sm font-bold text-gray-500 uppercase tracking-wider mb-4">1. åŸºç¤è³‡è¨Š</h2>
                                
                                <div className="space-y-4">
                                    {/* å®¢æˆ¶å§“å */}
                                    <div>
                                        <label className="block text-xs font-semibold text-gray-600 mb-1">å®¢æˆ¶ç¨±å‘¼ (Name)</label>
                                        <div className="relative">
                                            <i className="fas fa-user absolute left-3 top-3 text-gray-400"></i>
                                            <input 
                                                type="text" 
                                                placeholder="e.g. Gaurav"
                                                className="w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm"
                                                value={customerName}
                                                onChange={(e) => setCustomerName(e.target.value)}
                                            />
                                        </div>
                                    </div>

                                    {/* ä»‹ç´¹äºº */}
                                    <div>
                                        <label className="block text-xs font-semibold text-gray-600 mb-1 flex justify-between">
                                           <span>ä»‹ç´¹äºº (Referrer)</span>
                                           <span className="text-orange-500 font-normal opacity-70">Optional</span>
                                        </label>
                                        <div className="relative">
                                            <i className="fas fa-users absolute left-3 top-3 text-gray-400"></i>
                                            <input 
                                                type="text" 
                                                placeholder="e.g. Common Friend"
                                                className="w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm bg-orange-50 border-orange-100"
                                                value={referrerName}
                                                onChange={(e) => setReferrerName(e.target.value)}
                                            />
                                        </div>
                                        {referrerName && (
                                            <p className="text-xs text-orange-600 mt-1 pl-1">* å·²åˆ‡æ›ç‚ºã€Œæœ‰ä»‹ç´¹äººã€è©±è¡“</p>
                                        )}
                                    </div>

                                    {/* å®¢æˆ¶å…¬å¸ */}
                                    <div>
                                        <label className="block text-xs font-semibold text-gray-600 mb-1">å®¢æˆ¶å…¬å¸ (Company)</label>
                                        <div className="relative">
                                            <i className="fas fa-building absolute left-3 top-3 text-gray-400"></i>
                                            <input 
                                                type="text" 
                                                placeholder="e.g. Hero, boAt"
                                                className="w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm"
                                                value={customerCompany}
                                                onChange={(e) => setCustomerCompany(e.target.value)}
                                            />
                                        </div>
                                    </div>

                                    {/* æ‹œè¨ªæ—¥æœŸèˆ‡åœ°é» */}
                                    <div>
                                        <label className="block text-xs font-semibold text-gray-600 mb-1">æ‹œè¨ªæ—¥æœŸ (Visit Date)</label>
                                        <div className="flex gap-2 mb-2">
                                            <div className="flex-1">
                                                <input 
                                                    type="text" 
                                                    placeholder="Start (e.g. 20th)"
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm"
                                                    value={startDate}
                                                    onChange={(e) => setStartDate(e.target.value)}
                                                />
                                            </div>
                                            <div className="flex items-center text-gray-400">-</div>
                                            <div className="flex-1">
                                                <input 
                                                    type="text" 
                                                    placeholder="End (Optional)"
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm"
                                                    value={endDate}
                                                    onChange={(e) => setEndDate(e.target.value)}
                                                />
                                            </div>
                                        </div>
                                        <div className="text-xs text-gray-400 mb-2 pl-1">
                                           * åªå¡«å·¦é‚Š = æŒ‡å®šæ—¥ï¼›å¡«å…©é‚Š = æ—¥æœŸå€é–“
                                        </div>

                                        <label className="block text-xs font-semibold text-gray-600 mb-1">åœ°é» (Location)</label>
                                        <input 
                                            type="text" 
                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm"
                                            value={visitLocation}
                                            onChange={(e) => setVisitLocation(e.target.value)}
                                        />
                                    </div>

                                    <div className="pt-4 border-t border-gray-200">
                                        <label className="block text-xs font-semibold text-gray-400 mb-1">æˆ‘çš„è³‡è¨Š (Defaults)</label>
                                        <div className="grid grid-cols-2 gap-2">
                                            <input 
                                                className="w-full px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-500"
                                                value={myName} onChange={(e) => setMyName(e.target.value)}
                                            />
                                            <input 
                                                className="w-full px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-500"
                                                value={myCompany} onChange={(e) => setMyCompany(e.target.value)}
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* å³å´ï¼šç”Ÿæˆèˆ‡é¸æ“‡å€ */}
                            <div className="col-span-1 lg:col-span-2 p-6 flex flex-col h-full">
                                
                                <h2 className="text-sm font-bold text-gray-500 uppercase tracking-wider mb-4">2. é¸æ“‡æƒ…å¢ƒ & ç”Ÿæˆ</h2>

                                {/* Stage Tabs */}
                                <div className="flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6">
                                    {[
                                        { id: 1, label: 'é™Œç”Ÿé–‹ç™¼', icon: 'fa-user' },
                                        { id: 2, label: 'é‚€ç´„è¦‹é¢', icon: 'fa-handshake' },
                                        { id: 3, label: 'è¡Œç¨‹é€šçŸ¥', icon: 'fa-map-marked-alt' },
                                    ].map((tab) => (
                                        <button
                                            key={tab.id}
                                            onClick={() => { setStage(tab.id); setSubScenario(Object.keys(scripts[tab.id])[0]); }}
                                            className={`flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-md transition-all \${
                                                stage === tab.id 
                                                ? 'bg-white text-orange-600 shadow-sm' 
                                                : 'text-gray-500 hover:text-gray-700'
                                            }`}
                                        >
                                            <i className={`fas \${tab.icon}`}></i>
                                            {tab.label}
                                        </button>
                                    ))}
                                </div>

                                {/* Sub-scenarios */}
                                <div className="mb-4 flex flex-wrap gap-2">
                                    {Object.entries(scripts[stage]).map(([key, info]) => (
                                        <button
                                            key={key}
                                            onClick={() => setSubScenario(key)}
                                            className={`px-4 py-1.5 rounded-full text-xs font-medium border transition-colors \${
                                                subScenario === key
                                                ? 'bg-orange-100 text-orange-700 border-orange-200'
                                                : 'bg-white text-gray-600 border-gray-200 hover:bg-gray-50'
                                            }`}
                                        >
                                            {info.title}
                                        </button>
                                    ))}
                                </div>

                                {/* Generated Area */}
                                <div className="flex-1 flex flex-col">
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="text-xs font-semibold text-gray-400">
                                            Tone: {scripts[stage][subScenario]?.tone}
                                        </span>
                                        <button 
                                            onClick={copyToClipboard}
                                            className={`flex items-center gap-1 text-xs px-3 py-1.5 rounded transition-colors \${
                                                copied ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                            }`}
                                        >
                                            <i className={`fas \${copied ? 'fa-check' : 'fa-copy'}`}></i>
                                            {copied ? ' Copied!' : ' Copy Text'}
                                        </button>
                                    </div>

                                    <textarea 
                                        className="w-full flex-1 p-4 bg-green-50 border border-green-200 rounded-xl text-gray-800 text-sm leading-relaxed resize-none focus:ring-2 focus:ring-green-400 focus:outline-none textarea-box"
                                        style={{minHeight: '200px'}}
                                        value={generatedScript}
                                        onChange={(e) => setGeneratedScript(e.target.value)}
                                    />
                                    
                                    <div className="mt-2 text-xs text-gray-400 flex items-center gap-1">
                                        <i className="fas fa-info-circle"></i>
                                        <span>Tip: å¯ä»¥ç›´æ¥åœ¨ä¸Šæ–¹ç·¨è¼¯æ¡†å¾®èª¿å¾Œå†è¤‡è£½ã€‚</span>
                                    </div>
                                </div>

                            </div>
                        </div>

                        {/* Footer: Indian Context Tips */}
                        <div className="bg-yellow-50 p-4 border-t border-yellow-100 text-sm text-yellow-800">
                            <div className="flex items-start gap-3">
                                <div className="bg-yellow-200 p-2 rounded-full shrink-0 w-8 h-8 flex items-center justify-center">
                                    <i className="fas fa-lightbulb text-yellow-700"></i>
                                </div>
                                <div>
                                    <h4 className="font-bold mb-1">ğŸ‡®ğŸ‡³ å°åº¦å¸‚å ´æºé€šå°æ’‡æ­¥</h4>
                                    <ul className="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 list-disc pl-4 text-xs">
                                        <li><strong>ç¨±å‘¼:</strong> åˆæ¬¡å³ä½¿æ˜¯ WhatsApp ä¹Ÿå»ºè­°ç”¨ "Mr. [Last Name]"ã€‚</li>
                                        <li><strong>æ™‚é–“:</strong> é¿å…åœ¨åˆé¤æ™‚é–“ (1:30 - 2:30 PM) å‚³è¨Šã€‚</li>
                                        <li><strong>è¦‹é¢:</strong> èªª "Coffee" æˆ– "Chai" æ¯”èªª "Meeting" å®¹æ˜“ç´„åˆ°äººã€‚</li>
                                        <li><strong>é—œéµ:</strong> "I will be there" åœ¨å°åº¦æ˜¯éå¸¸æœ‰åŠ›çš„æ‰¿è«¾ã€‚</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            );
        };

        ReactDOM.render(<IndiaSalesGen />, document.getElementById('root'));
    </script>
</body>
</html>